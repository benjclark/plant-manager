{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/draw-on-canvas.js","src/interact-with-canvas.js","src/mouse-event-handlers.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"interact-with-canvas.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function clearCanvas() {\n    const canvas = document.querySelector('canvas');\n    const canvasContext = canvas.getContext('2d');\n    canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n}\n\nfunction drawBed(x, y, w, h) {\n    const canvasContext = document.querySelector('canvas').getContext('2d');\n    canvasContext.beginPath();\n    canvasContext.rect(x, y, w, h);\n    canvasContext.closePath();\n    canvasContext.fill();\n}\n\nfunction drawPlant(x, y, w, h, fileName) {\n    const canvas = document.querySelector('canvas');\n    const ctx = canvas.getContext('2d');\n    const image = new Image();\n    image.src = `/${fileName}`;\n    image.onload = () => {\n        ctx.drawImage(image, x, y, w, h);\n    };\n}\n\nfunction drawAll() {\n    const pm = window.plantManager;\n    const canvas = document.querySelector('canvas');\n    const canvasContext = canvas.getContext('2d');\n    clearCanvas();\n    canvasContext.fillStyle = \"#af865d3d\";\n    drawBed(0, 0, canvas.width, canvas.height);\n    for (let i = 0; i < pm.beds.length; i++) {\n        const b = pm.beds[i];\n        canvasContext.fillStyle = b.fill;\n        drawBed(b.x, b.y, b.width, b.height);\n    }\n    for (let i = 0; i < pm.plants.length; i++) {\n        const p = pm.plants[i];\n        drawPlant(p.x, p.y, p.width, p.height, p.imageFileName);\n    }\n}\n\nmodule.exports = {\n    clearCanvas,\n    drawBed,\n    drawAll\n};\n","const mouseEventHandlers = require('./mouse-event-handlers');\nconst drawOnCanvas = require('./draw-on-canvas');\n\nconst canvas = document.querySelector('canvas');\nconst canvasContext = canvas.getContext('2d');\n\nfunction detectIfPlantIsInABed() {\n    const currentSelected = window.plantManager.mouseEventVariables.currentRectSelected;\n    if (!currentSelected) {\n        return;\n    }\n    // make sure it is a plant and not a bed\n    if (currentSelected.bedType) {\n        return;\n    }\n\n    const plant_x = currentSelected.x;\n    const plant_y = currentSelected.y;\n\n    const pm = window.plantManager;\n    for (let i = (pm.beds.length - 1); i >= 0; i--) {\n        const b = pm.beds[i];\n        if (plant_x > parseInt(b.x, 10) && plant_x < parseInt(b.x, 10) + parseInt(b.width, 10) && plant_y > parseInt(b.y, 10) && plant_y < parseInt(b.y, 10) + parseInt(b.height, 10)) {\n            // if yes, set that rects isDragging=true\n            return b.name\n        }\n    }\n    return false;\n}\n\nfunction renderEditFormForCurrentlySelectedPlant() {\n    const currentSelected = window.plantManager.mouseEventVariables.currentRectSelected;\n    if (!currentSelected) {\n        return;\n    }\n\n    const currentBed = detectIfPlantIsInABed();\n\n    const updateBedForm = document.querySelector('form[data-update-plant]');\n    const name = currentSelected.name;\n    const bed = currentBed;\n    currentSelected.bed = currentBed;\n    const type = currentSelected.type;\n    const datePlanted = currentSelected.datePlanted;\n    const lastCrop = currentSelected.lastCrop;\n    const nextCrop = currentSelected.nextCrop;\n\n    updateBedForm.querySelector('[data-plant-name]').value = name;\n    updateBedForm.querySelector('[data-plant-bed]').value = bed;\n    updateBedForm.querySelector('[data-plant-type]').value = type;\n    updateBedForm.querySelector('[data-plant-date-planted]').value = datePlanted;\n    updateBedForm.querySelector('[data-plant-last-crop]').value = lastCrop;\n    updateBedForm.querySelector('[data-plant-next-crop]').value = nextCrop;\n\n\n}\n\nfunction renderEditFormForCurrentlySelectedBed() {\n    const currentSelected = window.plantManager.mouseEventVariables.currentRectSelected;\n    if (!currentSelected) {\n        return;\n    }\n\n    const updateBedForm = document.querySelector('form[data-update-bed]');\n    const name = currentSelected.name;\n    const width = currentSelected.width;\n    const height = currentSelected.height;\n    const fill = currentSelected.fill;\n    const soilCharacteristics = currentSelected.soilCharacteristics;\n    const type = currentSelected.bedType;\n\n    updateBedForm.querySelector('[data-bed-name]').value = name;\n    updateBedForm.querySelector('[data-bed-width]').value = width;\n    updateBedForm.querySelector('[data-bed-height]').value = height;\n    updateBedForm.querySelector('[data-bed-colour]').value = fill;\n    updateBedForm.querySelector('[data-bed-soil-characteristics]').value = soilCharacteristics;\n    updateBedForm.querySelector('[data-bed-type]').value = type;\n}\n\nfunction setMovePlantsWithBedState() {\n    const input = document.querySelector('[data-move-plants-with-bed]');\n    const checked = input.checked;\n    if (checked) {\n        window.plantManager.mouseEventVariables.movePlantsWithBedState = true;\n        return;\n    }\n    window.plantManager.mouseEventVariables.movePlantsWithBedState = false;\n    return;\n}\n\nconst movePlantsBedButton = document.querySelector('[data-move-plants-with-bed]');\nmovePlantsBedButton.addEventListener('click', () => {\n    setMovePlantsWithBedState();\n    if (movePlantsBedButton.checked === true) {\n        movePlantsBedButton.checked = false;\n    } else {\n        movePlantsBedButton.checked = true;\n    }\n});\n\nwindow.plantManager = {\n    canvasOffsetX: canvas.getBoundingClientRect().left,\n    canvasOffsetY: canvas.getBoundingClientRect().top,\n    beds: [],\n    plants: [],\n    renderEditFormForCurrentlySelectedBed: renderEditFormForCurrentlySelectedBed,\n    renderEditFormForCurrentlySelectedPlant: renderEditFormForCurrentlySelectedPlant,\n    setMovePlantsWithBedState: setMovePlantsWithBedState\n};\nconst pm = window.plantManager;\n\ncanvasContext.fillStyle = \"#af865d3d\";\ncanvasContext.fillRect(0,0, canvas.width, canvas.height);\n\nmouseEventHandlers.setupMouseEventVariables();\ncanvas.onmousedown = mouseEventHandlers.mouseDownHandler;\ncanvas.onmouseup = mouseEventHandlers.mouseUpHandler;\ncanvas.onmousemove = mouseEventHandlers.mouseMoveHandler;\nsetMovePlantsWithBedState();\n\ndrawOnCanvas.drawAll();\npm.drawAll = drawOnCanvas.drawAll;\n","const drawOnCanvas = require('./draw-on-canvas');\n\nfunction mouseUpHandler(e) {\n    const pm = window.plantManager;\n    const mouseEventVars = pm.mouseEventVariables;\n    e.preventDefault();\n    e.stopPropagation();\n\n    mouseEventVars.somethingIsBeingDragged = false;\n\n    for (let z = 0; z < pm.beds.length; z++) {\n        pm.beds[z].isDragging = false;\n    }\n    for (let z = 0; z < pm.plants.length; z++) {\n        pm.plants[z].isDragging = false;\n    }\n}\n\nfunction dragIfClicked(rects, pm, mx, my, mouseEventVars) {\n    for (let i = (rects.length - 1); i >= 0; i--) {\n        const rect = rects[i];\n        if (mx > parseInt(rect.x, 10) && mx < parseInt(rect.x, 10) + parseInt(rect.width, 10) && my > parseInt(rect.y, 10) && my < parseInt(rect.y, 10) + parseInt(rect.height, 10)) {\n            mouseEventVars.somethingIsBeingDragged = true;\n            mouseEventVars.currentRectSelected = rect;\n            rect.isDragging = true;\n            pm.renderEditFormForCurrentlySelectedBed();\n            return;\n        }\n    }\n}\n\nfunction mouseDownHandler(e) {\n    const pm = window.plantManager;\n    const mouseEventVars = pm.mouseEventVariables;\n    e.preventDefault();\n    e.stopPropagation();\n\n    const mx = parseInt(e.clientX - pm.canvasOffsetX);\n    const my = parseInt(e.clientY - pm.canvasOffsetY);\n\n    mouseEventVars.somethingIsBeingDragged = false;\n\n    const shouldMoveBedsWithPlants = window.plantManager.mouseEventVariables.movePlantsWithBedState;\n    console.log(shouldMoveBedsWithPlants);\n\n    if (shouldMoveBedsWithPlants) {\n        dragIfClicked(pm.beds, pm, mx, my, mouseEventVars);\n        const bedName = mouseEventVars.currentRectSelected.name;\n\n        for (let i = 0; i < pm.plants.length; i++) {\n            if (pm.plants[i].bed === bedName) {\n                pm.plants[i].isDragging = true;\n                console.log(pm.plants[i]);\n            }\n        }\n    } else {\n        dragIfClicked(pm.plants, pm, mx, my, mouseEventVars);\n        if (mouseEventVars.somethingIsBeingDragged === false) {\n            dragIfClicked(pm.beds, pm, mx, my, mouseEventVars);\n        }\n    }\n\n    mouseEventVars.startX = mx;\n    mouseEventVars.startY = my;\n}\n\nfunction mouseMoveHandler(e) {\n    const pm = window.plantManager;\n    const mouseEventVars = pm.mouseEventVariables;\n    if (mouseEventVars.somethingIsBeingDragged) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const mx = parseInt(e.clientX - pm.canvasOffsetX);\n        const my = parseInt(e.clientY - pm.canvasOffsetY);\n\n        const dx = mx - mouseEventVars.startX;\n        const dy = my - mouseEventVars.startY;\n\n        for (let i = 0; i < pm.beds.length; i++) {\n            const b = pm.beds[i];\n            if (b.isDragging) {\n                b.x += dx;\n                b.y += dy;\n            }\n        }\n\n        for (let i = 0; i < pm.plants.length; i++) {\n            const p = pm.plants[i];\n            if (p.isDragging) {\n                p.x += dx;\n                p.y += dy;\n            }\n        }\n\n        drawOnCanvas.drawAll();\n\n        mouseEventVars.startX = mx;\n        mouseEventVars.startY = my;\n    }\n}\n\nfunction setupMouseEventVariables() {\n    const pm = window.plantManager;\n    pm.mouseEventVariables = {};\n    pm.mouseEventVariables.somethingIsBeingDragged = false;\n    pm.mouseEventVariables.currentRectSelected = undefined;\n    pm.mouseEventVariables.startX = undefined;\n    pm.mouseEventVariables.startY = undefined;\n    pm.mouseEventVariables.movePlantsWithBedState = undefined;\n}\n\nmodule.exports = {\n    mouseUpHandler,\n    mouseDownHandler,\n    mouseMoveHandler,\n    setupMouseEventVariables\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZHJhdy1vbi1jYW52YXMuanMiLCJzcmMvaW50ZXJhY3Qtd2l0aC1jYW52YXMuanMiLCJzcmMvbW91c2UtZXZlbnQtaGFuZGxlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImZ1bmN0aW9uIGNsZWFyQ2FudmFzKCkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuICAgIGNvbnN0IGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xufVxuXG5mdW5jdGlvbiBkcmF3QmVkKHgsIHksIHcsIGgpIHtcbiAgICBjb25zdCBjYW52YXNDb250ZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNhbnZhc0NvbnRleHQucmVjdCh4LCB5LCB3LCBoKTtcbiAgICBjYW52YXNDb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgIGNhbnZhc0NvbnRleHQuZmlsbCgpO1xufVxuXG5mdW5jdGlvbiBkcmF3UGxhbnQoeCwgeSwgdywgaCwgZmlsZU5hbWUpIHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLnNyYyA9IGAvJHtmaWxlTmFtZX1gO1xuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgdywgaCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZHJhd0FsbCgpIHtcbiAgICBjb25zdCBwbSA9IHdpbmRvdy5wbGFudE1hbmFnZXI7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG4gICAgY29uc3QgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNsZWFyQ2FudmFzKCk7XG4gICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBcIiNhZjg2NWQzZFwiO1xuICAgIGRyYXdCZWQoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBtLmJlZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYiA9IHBtLmJlZHNbaV07XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gYi5maWxsO1xuICAgICAgICBkcmF3QmVkKGIueCwgYi55LCBiLndpZHRoLCBiLmhlaWdodCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG0ucGxhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwbS5wbGFudHNbaV07XG4gICAgICAgIGRyYXdQbGFudChwLngsIHAueSwgcC53aWR0aCwgcC5oZWlnaHQsIHAuaW1hZ2VGaWxlTmFtZSk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBjbGVhckNhbnZhcyxcbiAgICBkcmF3QmVkLFxuICAgIGRyYXdBbGxcbn07XG4iLCJjb25zdCBtb3VzZUV2ZW50SGFuZGxlcnMgPSByZXF1aXJlKCcuL21vdXNlLWV2ZW50LWhhbmRsZXJzJyk7XG5jb25zdCBkcmF3T25DYW52YXMgPSByZXF1aXJlKCcuL2RyYXctb24tY2FudmFzJyk7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuY29uc3QgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5mdW5jdGlvbiBkZXRlY3RJZlBsYW50SXNJbkFCZWQoKSB7XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkID0gd2luZG93LnBsYW50TWFuYWdlci5tb3VzZUV2ZW50VmFyaWFibGVzLmN1cnJlbnRSZWN0U2VsZWN0ZWQ7XG4gICAgaWYgKCFjdXJyZW50U2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgaXQgaXMgYSBwbGFudCBhbmQgbm90IGEgYmVkXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RlZC5iZWRUeXBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwbGFudF94ID0gY3VycmVudFNlbGVjdGVkLng7XG4gICAgY29uc3QgcGxhbnRfeSA9IGN1cnJlbnRTZWxlY3RlZC55O1xuXG4gICAgY29uc3QgcG0gPSB3aW5kb3cucGxhbnRNYW5hZ2VyO1xuICAgIGZvciAobGV0IGkgPSAocG0uYmVkcy5sZW5ndGggLSAxKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgYiA9IHBtLmJlZHNbaV07XG4gICAgICAgIGlmIChwbGFudF94ID4gcGFyc2VJbnQoYi54LCAxMCkgJiYgcGxhbnRfeCA8IHBhcnNlSW50KGIueCwgMTApICsgcGFyc2VJbnQoYi53aWR0aCwgMTApICYmIHBsYW50X3kgPiBwYXJzZUludChiLnksIDEwKSAmJiBwbGFudF95IDwgcGFyc2VJbnQoYi55LCAxMCkgKyBwYXJzZUludChiLmhlaWdodCwgMTApKSB7XG4gICAgICAgICAgICAvLyBpZiB5ZXMsIHNldCB0aGF0IHJlY3RzIGlzRHJhZ2dpbmc9dHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGIubmFtZVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyRWRpdEZvcm1Gb3JDdXJyZW50bHlTZWxlY3RlZFBsYW50KCkge1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZCA9IHdpbmRvdy5wbGFudE1hbmFnZXIubW91c2VFdmVudFZhcmlhYmxlcy5jdXJyZW50UmVjdFNlbGVjdGVkO1xuICAgIGlmICghY3VycmVudFNlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50QmVkID0gZGV0ZWN0SWZQbGFudElzSW5BQmVkKCk7XG5cbiAgICBjb25zdCB1cGRhdGVCZWRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXVwZGF0ZS1wbGFudF0nKTtcbiAgICBjb25zdCBuYW1lID0gY3VycmVudFNlbGVjdGVkLm5hbWU7XG4gICAgY29uc3QgYmVkID0gY3VycmVudEJlZDtcbiAgICBjdXJyZW50U2VsZWN0ZWQuYmVkID0gY3VycmVudEJlZDtcbiAgICBjb25zdCB0eXBlID0gY3VycmVudFNlbGVjdGVkLnR5cGU7XG4gICAgY29uc3QgZGF0ZVBsYW50ZWQgPSBjdXJyZW50U2VsZWN0ZWQuZGF0ZVBsYW50ZWQ7XG4gICAgY29uc3QgbGFzdENyb3AgPSBjdXJyZW50U2VsZWN0ZWQubGFzdENyb3A7XG4gICAgY29uc3QgbmV4dENyb3AgPSBjdXJyZW50U2VsZWN0ZWQubmV4dENyb3A7XG5cbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBsYW50LW5hbWVdJykudmFsdWUgPSBuYW1lO1xuICAgIHVwZGF0ZUJlZEZvcm0ucXVlcnlTZWxlY3RvcignW2RhdGEtcGxhbnQtYmVkXScpLnZhbHVlID0gYmVkO1xuICAgIHVwZGF0ZUJlZEZvcm0ucXVlcnlTZWxlY3RvcignW2RhdGEtcGxhbnQtdHlwZV0nKS52YWx1ZSA9IHR5cGU7XG4gICAgdXBkYXRlQmVkRm9ybS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wbGFudC1kYXRlLXBsYW50ZWRdJykudmFsdWUgPSBkYXRlUGxhbnRlZDtcbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBsYW50LWxhc3QtY3JvcF0nKS52YWx1ZSA9IGxhc3RDcm9wO1xuICAgIHVwZGF0ZUJlZEZvcm0ucXVlcnlTZWxlY3RvcignW2RhdGEtcGxhbnQtbmV4dC1jcm9wXScpLnZhbHVlID0gbmV4dENyb3A7XG5cblxufVxuXG5mdW5jdGlvbiByZW5kZXJFZGl0Rm9ybUZvckN1cnJlbnRseVNlbGVjdGVkQmVkKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZCA9IHdpbmRvdy5wbGFudE1hbmFnZXIubW91c2VFdmVudFZhcmlhYmxlcy5jdXJyZW50UmVjdFNlbGVjdGVkO1xuICAgIGlmICghY3VycmVudFNlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVCZWRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXVwZGF0ZS1iZWRdJyk7XG4gICAgY29uc3QgbmFtZSA9IGN1cnJlbnRTZWxlY3RlZC5uYW1lO1xuICAgIGNvbnN0IHdpZHRoID0gY3VycmVudFNlbGVjdGVkLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGN1cnJlbnRTZWxlY3RlZC5oZWlnaHQ7XG4gICAgY29uc3QgZmlsbCA9IGN1cnJlbnRTZWxlY3RlZC5maWxsO1xuICAgIGNvbnN0IHNvaWxDaGFyYWN0ZXJpc3RpY3MgPSBjdXJyZW50U2VsZWN0ZWQuc29pbENoYXJhY3RlcmlzdGljcztcbiAgICBjb25zdCB0eXBlID0gY3VycmVudFNlbGVjdGVkLmJlZFR5cGU7XG5cbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJlZC1uYW1lXScpLnZhbHVlID0gbmFtZTtcbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJlZC13aWR0aF0nKS52YWx1ZSA9IHdpZHRoO1xuICAgIHVwZGF0ZUJlZEZvcm0ucXVlcnlTZWxlY3RvcignW2RhdGEtYmVkLWhlaWdodF0nKS52YWx1ZSA9IGhlaWdodDtcbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJlZC1jb2xvdXJdJykudmFsdWUgPSBmaWxsO1xuICAgIHVwZGF0ZUJlZEZvcm0ucXVlcnlTZWxlY3RvcignW2RhdGEtYmVkLXNvaWwtY2hhcmFjdGVyaXN0aWNzXScpLnZhbHVlID0gc29pbENoYXJhY3RlcmlzdGljcztcbiAgICB1cGRhdGVCZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJlZC10eXBlXScpLnZhbHVlID0gdHlwZTtcbn1cblxuZnVuY3Rpb24gc2V0TW92ZVBsYW50c1dpdGhCZWRTdGF0ZSgpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vdmUtcGxhbnRzLXdpdGgtYmVkXScpO1xuICAgIGNvbnN0IGNoZWNrZWQgPSBpbnB1dC5jaGVja2VkO1xuICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgIHdpbmRvdy5wbGFudE1hbmFnZXIubW91c2VFdmVudFZhcmlhYmxlcy5tb3ZlUGxhbnRzV2l0aEJlZFN0YXRlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB3aW5kb3cucGxhbnRNYW5hZ2VyLm1vdXNlRXZlbnRWYXJpYWJsZXMubW92ZVBsYW50c1dpdGhCZWRTdGF0ZSA9IGZhbHNlO1xuICAgIHJldHVybjtcbn1cblxuY29uc3QgbW92ZVBsYW50c0JlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vdmUtcGxhbnRzLXdpdGgtYmVkXScpO1xubW92ZVBsYW50c0JlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzZXRNb3ZlUGxhbnRzV2l0aEJlZFN0YXRlKCk7XG4gICAgaWYgKG1vdmVQbGFudHNCZWRCdXR0b24uY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBtb3ZlUGxhbnRzQmVkQnV0dG9uLmNoZWNrZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBtb3ZlUGxhbnRzQmVkQnV0dG9uLmNoZWNrZWQgPSB0cnVlO1xuICAgIH1cbn0pO1xuXG53aW5kb3cucGxhbnRNYW5hZ2VyID0ge1xuICAgIGNhbnZhc09mZnNldFg6IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LFxuICAgIGNhbnZhc09mZnNldFk6IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsXG4gICAgYmVkczogW10sXG4gICAgcGxhbnRzOiBbXSxcbiAgICByZW5kZXJFZGl0Rm9ybUZvckN1cnJlbnRseVNlbGVjdGVkQmVkOiByZW5kZXJFZGl0Rm9ybUZvckN1cnJlbnRseVNlbGVjdGVkQmVkLFxuICAgIHJlbmRlckVkaXRGb3JtRm9yQ3VycmVudGx5U2VsZWN0ZWRQbGFudDogcmVuZGVyRWRpdEZvcm1Gb3JDdXJyZW50bHlTZWxlY3RlZFBsYW50LFxuICAgIHNldE1vdmVQbGFudHNXaXRoQmVkU3RhdGU6IHNldE1vdmVQbGFudHNXaXRoQmVkU3RhdGVcbn07XG5jb25zdCBwbSA9IHdpbmRvdy5wbGFudE1hbmFnZXI7XG5cbmNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gXCIjYWY4NjVkM2RcIjtcbmNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG5tb3VzZUV2ZW50SGFuZGxlcnMuc2V0dXBNb3VzZUV2ZW50VmFyaWFibGVzKCk7XG5jYW52YXMub25tb3VzZWRvd24gPSBtb3VzZUV2ZW50SGFuZGxlcnMubW91c2VEb3duSGFuZGxlcjtcbmNhbnZhcy5vbm1vdXNldXAgPSBtb3VzZUV2ZW50SGFuZGxlcnMubW91c2VVcEhhbmRsZXI7XG5jYW52YXMub25tb3VzZW1vdmUgPSBtb3VzZUV2ZW50SGFuZGxlcnMubW91c2VNb3ZlSGFuZGxlcjtcbnNldE1vdmVQbGFudHNXaXRoQmVkU3RhdGUoKTtcblxuZHJhd09uQ2FudmFzLmRyYXdBbGwoKTtcbnBtLmRyYXdBbGwgPSBkcmF3T25DYW52YXMuZHJhd0FsbDtcbiIsImNvbnN0IGRyYXdPbkNhbnZhcyA9IHJlcXVpcmUoJy4vZHJhdy1vbi1jYW52YXMnKTtcblxuZnVuY3Rpb24gbW91c2VVcEhhbmRsZXIoZSkge1xuICAgIGNvbnN0IHBtID0gd2luZG93LnBsYW50TWFuYWdlcjtcbiAgICBjb25zdCBtb3VzZUV2ZW50VmFycyA9IHBtLm1vdXNlRXZlbnRWYXJpYWJsZXM7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBtb3VzZUV2ZW50VmFycy5zb21ldGhpbmdJc0JlaW5nRHJhZ2dlZCA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgeiA9IDA7IHogPCBwbS5iZWRzLmxlbmd0aDsgeisrKSB7XG4gICAgICAgIHBtLmJlZHNbel0uaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHBtLnBsYW50cy5sZW5ndGg7IHorKykge1xuICAgICAgICBwbS5wbGFudHNbel0uaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhZ0lmQ2xpY2tlZChyZWN0cywgcG0sIG14LCBteSwgbW91c2VFdmVudFZhcnMpIHtcbiAgICBmb3IgKGxldCBpID0gKHJlY3RzLmxlbmd0aCAtIDEpOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCByZWN0ID0gcmVjdHNbaV07XG4gICAgICAgIGlmIChteCA+IHBhcnNlSW50KHJlY3QueCwgMTApICYmIG14IDwgcGFyc2VJbnQocmVjdC54LCAxMCkgKyBwYXJzZUludChyZWN0LndpZHRoLCAxMCkgJiYgbXkgPiBwYXJzZUludChyZWN0LnksIDEwKSAmJiBteSA8IHBhcnNlSW50KHJlY3QueSwgMTApICsgcGFyc2VJbnQocmVjdC5oZWlnaHQsIDEwKSkge1xuICAgICAgICAgICAgbW91c2VFdmVudFZhcnMuc29tZXRoaW5nSXNCZWluZ0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgbW91c2VFdmVudFZhcnMuY3VycmVudFJlY3RTZWxlY3RlZCA9IHJlY3Q7XG4gICAgICAgICAgICByZWN0LmlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgcG0ucmVuZGVyRWRpdEZvcm1Gb3JDdXJyZW50bHlTZWxlY3RlZEJlZCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtb3VzZURvd25IYW5kbGVyKGUpIHtcbiAgICBjb25zdCBwbSA9IHdpbmRvdy5wbGFudE1hbmFnZXI7XG4gICAgY29uc3QgbW91c2VFdmVudFZhcnMgPSBwbS5tb3VzZUV2ZW50VmFyaWFibGVzO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgY29uc3QgbXggPSBwYXJzZUludChlLmNsaWVudFggLSBwbS5jYW52YXNPZmZzZXRYKTtcbiAgICBjb25zdCBteSA9IHBhcnNlSW50KGUuY2xpZW50WSAtIHBtLmNhbnZhc09mZnNldFkpO1xuXG4gICAgbW91c2VFdmVudFZhcnMuc29tZXRoaW5nSXNCZWluZ0RyYWdnZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0IHNob3VsZE1vdmVCZWRzV2l0aFBsYW50cyA9IHdpbmRvdy5wbGFudE1hbmFnZXIubW91c2VFdmVudFZhcmlhYmxlcy5tb3ZlUGxhbnRzV2l0aEJlZFN0YXRlO1xuICAgIGNvbnNvbGUubG9nKHNob3VsZE1vdmVCZWRzV2l0aFBsYW50cyk7XG5cbiAgICBpZiAoc2hvdWxkTW92ZUJlZHNXaXRoUGxhbnRzKSB7XG4gICAgICAgIGRyYWdJZkNsaWNrZWQocG0uYmVkcywgcG0sIG14LCBteSwgbW91c2VFdmVudFZhcnMpO1xuICAgICAgICBjb25zdCBiZWROYW1lID0gbW91c2VFdmVudFZhcnMuY3VycmVudFJlY3RTZWxlY3RlZC5uYW1lO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG0ucGxhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocG0ucGxhbnRzW2ldLmJlZCA9PT0gYmVkTmFtZSkge1xuICAgICAgICAgICAgICAgIHBtLnBsYW50c1tpXS5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbS5wbGFudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ0lmQ2xpY2tlZChwbS5wbGFudHMsIHBtLCBteCwgbXksIG1vdXNlRXZlbnRWYXJzKTtcbiAgICAgICAgaWYgKG1vdXNlRXZlbnRWYXJzLnNvbWV0aGluZ0lzQmVpbmdEcmFnZ2VkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZHJhZ0lmQ2xpY2tlZChwbS5iZWRzLCBwbSwgbXgsIG15LCBtb3VzZUV2ZW50VmFycyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtb3VzZUV2ZW50VmFycy5zdGFydFggPSBteDtcbiAgICBtb3VzZUV2ZW50VmFycy5zdGFydFkgPSBteTtcbn1cblxuZnVuY3Rpb24gbW91c2VNb3ZlSGFuZGxlcihlKSB7XG4gICAgY29uc3QgcG0gPSB3aW5kb3cucGxhbnRNYW5hZ2VyO1xuICAgIGNvbnN0IG1vdXNlRXZlbnRWYXJzID0gcG0ubW91c2VFdmVudFZhcmlhYmxlcztcbiAgICBpZiAobW91c2VFdmVudFZhcnMuc29tZXRoaW5nSXNCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IG14ID0gcGFyc2VJbnQoZS5jbGllbnRYIC0gcG0uY2FudmFzT2Zmc2V0WCk7XG4gICAgICAgIGNvbnN0IG15ID0gcGFyc2VJbnQoZS5jbGllbnRZIC0gcG0uY2FudmFzT2Zmc2V0WSk7XG5cbiAgICAgICAgY29uc3QgZHggPSBteCAtIG1vdXNlRXZlbnRWYXJzLnN0YXJ0WDtcbiAgICAgICAgY29uc3QgZHkgPSBteSAtIG1vdXNlRXZlbnRWYXJzLnN0YXJ0WTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBtLmJlZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBwbS5iZWRzW2ldO1xuICAgICAgICAgICAgaWYgKGIuaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgICAgIGIueCArPSBkeDtcbiAgICAgICAgICAgICAgICBiLnkgKz0gZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBtLnBsYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcCA9IHBtLnBsYW50c1tpXTtcbiAgICAgICAgICAgIGlmIChwLmlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICBwLnggKz0gZHg7XG4gICAgICAgICAgICAgICAgcC55ICs9IGR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZHJhd09uQ2FudmFzLmRyYXdBbGwoKTtcblxuICAgICAgICBtb3VzZUV2ZW50VmFycy5zdGFydFggPSBteDtcbiAgICAgICAgbW91c2VFdmVudFZhcnMuc3RhcnRZID0gbXk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXR1cE1vdXNlRXZlbnRWYXJpYWJsZXMoKSB7XG4gICAgY29uc3QgcG0gPSB3aW5kb3cucGxhbnRNYW5hZ2VyO1xuICAgIHBtLm1vdXNlRXZlbnRWYXJpYWJsZXMgPSB7fTtcbiAgICBwbS5tb3VzZUV2ZW50VmFyaWFibGVzLnNvbWV0aGluZ0lzQmVpbmdEcmFnZ2VkID0gZmFsc2U7XG4gICAgcG0ubW91c2VFdmVudFZhcmlhYmxlcy5jdXJyZW50UmVjdFNlbGVjdGVkID0gdW5kZWZpbmVkO1xuICAgIHBtLm1vdXNlRXZlbnRWYXJpYWJsZXMuc3RhcnRYID0gdW5kZWZpbmVkO1xuICAgIHBtLm1vdXNlRXZlbnRWYXJpYWJsZXMuc3RhcnRZID0gdW5kZWZpbmVkO1xuICAgIHBtLm1vdXNlRXZlbnRWYXJpYWJsZXMubW92ZVBsYW50c1dpdGhCZWRTdGF0ZSA9IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgbW91c2VVcEhhbmRsZXIsXG4gICAgbW91c2VEb3duSGFuZGxlcixcbiAgICBtb3VzZU1vdmVIYW5kbGVyLFxuICAgIHNldHVwTW91c2VFdmVudFZhcmlhYmxlc1xufTtcbiJdfQ=="}